"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1560],{1560:(De,U,P)=>{P.r(U),P.d(U,{WinnerPageModule:()=>se});var O={};P.r(O),P.d(O,{create:()=>_,default:()=>q});var S=P(2200),Q=P(4341),F=P(7343),z=P(8132),B={};!function M(u,y,C,m){var R=!!(u.Worker&&u.Blob&&u.Promise&&u.OffscreenCanvas&&u.OffscreenCanvasRenderingContext2D&&u.HTMLCanvasElement&&u.HTMLCanvasElement.prototype.transferControlToOffscreen&&u.URL&&u.URL.createObjectURL),V="function"==typeof Path2D&&"function"==typeof DOMMatrix,le=function(){if(!u.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var a=r.transferToImageBitmap();e.createPattern(a,"no-repeat")}catch{return!1}return!0}();function G(){}function j(r){var e=y.exports.Promise,a=void 0!==e?e:u.Promise;return"function"==typeof a?new a(r):(r(G,G),null)}var e,a,r,o,i,A,N=function(r,e){return{transform:function(a){if(r)return a;if(e.has(a))return e.get(a);var o=new OffscreenCanvas(a.width,a.height);return o.getContext("2d").drawImage(a,0,0),e.set(a,o),o},clear:function(){e.clear()}}}(le,new Map),D=(r=Math.floor(16.666666666666668),o={},i=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(e=function(s){var l=Math.random();return o[l]=requestAnimationFrame(function t(c){i===c||i+r-1<c?(i=c,delete o[l],s()):o[l]=requestAnimationFrame(t)}),l},a=function(s){o[s]&&cancelAnimationFrame(o[s])}):(e=function(s){return setTimeout(s,r)},a=function(s){return clearTimeout(s)}),{frame:e,cancel:a}),ce=function(){var r,e,a={};return function(){if(r)return r;if(!C&&R){var i=["var CONFETTI, SIZE = {}, module = {};","("+M.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{r=new Worker(URL.createObjectURL(new Blob([i])))}catch(s){return typeof console<"u"&&"function"==typeof console.warn&&console.warn("\u{1f38a} Could not load worker",s),null}!function o(i){function s(l,t){i.postMessage({options:l||{},callback:t})}i.init=function(t){var c=t.transferControlToOffscreen();i.postMessage({canvas:c},[c])},i.fire=function(t,c,h){if(e)return s(t,null),e;var g=Math.random().toString(36).slice(2);return e=j(function(f){function v(b){b.data.callback===g&&(delete a[g],i.removeEventListener("message",v),e=null,N.clear(),h(),f())}i.addEventListener("message",v),s(t,g),a[g]=v.bind(null,{data:{callback:g}})})},i.reset=function(){for(var t in i.postMessage({reset:!0}),a)a[t](),delete a[t]}}(r)}return r}}(),ue={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(r,e,a){return function de(r,e){return e?e(r):r}(r&&function he(r){return null!=r}(r[e])?r[e]:ue[e],a)}function fe(r){return r<0?0:Math.floor(r)}function ge(r,e){return Math.floor(Math.random()*(e-r))+r}function W(r){return parseInt(r,16)}function ve(r){return r.map(me)}function me(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:W(e.substring(0,2)),g:W(e.substring(2,4)),b:W(e.substring(4,6))}}function Me(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function be(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function Ce(r){var e=r.angle*(Math.PI/180),a=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*r.startVelocity+Math.random()*r.startVelocity,angle2D:-e+(.5*a-Math.random()*a),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*r.gravity,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function Z(r,e){var f,a=!r,o=!!p(e||{},"resize"),i=!1,s=p(e,"disableForReducedMotion",Boolean),t=R&&p(e||{},"useWorker")?ce():null,c=a?Me:be,h=!(!r||!t||!r.__confetti_initialized),g="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function v(d,w,I){for(var x=p(d,"particleCount",fe),k=p(d,"angle",Number),T=p(d,"spread",Number),E=p(d,"startVelocity",Number),ke=p(d,"decay",Number),Te=p(d,"gravity",Number),Re=p(d,"drift",Number),H=p(d,"colors",ve),Oe=p(d,"ticks",Number),J=p(d,"shapes"),Se=p(d,"scalar"),Be=!!p(d,"flat"),X=function pe(r){var e=p(r,"origin",Object);return e.x=p(e,"x",Number),e.y=p(e,"y",Number),e}(d),K=x,L=[],je=r.width*X.x,Ne=r.height*X.y;K--;)L.push(Ce({x:je,y:Ne,angle:k,spread:T,startVelocity:E,color:H[K%H.length],shape:J[ge(0,J.length)],ticks:Oe,decay:ke,gravity:Te,drift:Re,scalar:Se,flat:Be}));return f?f.addFettis(L):(f=function Pe(r,e,a,o,i){var t,c,s=e.slice(),l=r.getContext("2d"),h=j(function(g){function f(){t=c=null,l.clearRect(0,0,o.width,o.height),N.clear(),i(),g()}t=D.frame(function v(){C&&!(o.width===m.width&&o.height===m.height)&&(o.width=r.width=m.width,o.height=r.height=m.height),!o.width&&!o.height&&(a(r),o.width=r.width,o.height=r.height),l.clearRect(0,0,o.width,o.height),(s=s.filter(function(b){return function Fe(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var a=e.tick++/e.totalTicks,o=e.x+e.random*e.tiltCos,i=e.y+e.random*e.tiltSin,s=e.wobbleX+e.random*e.tiltCos,l=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-a)+")",r.beginPath(),V&&"path"===e.shape.type&&"string"==typeof e.shape.path&&Array.isArray(e.shape.matrix))r.fill(function Ie(r,e,a,o,i,s,l){var t=new Path2D(r),c=new Path2D;c.addPath(t,new DOMMatrix(e));var h=new Path2D;return h.addPath(c,new DOMMatrix([Math.cos(l)*i,Math.sin(l)*i,-Math.sin(l)*s,Math.cos(l)*s,a,o])),h}(e.shape.path,e.shape.matrix,e.x,e.y,.1*Math.abs(s-o),.1*Math.abs(l-i),Math.PI/10*e.wobble));else if("bitmap"===e.shape.type){var t=Math.PI/10*e.wobble,c=.1*Math.abs(s-o),h=.1*Math.abs(l-i),g=e.shape.bitmap.width*e.scalar,f=e.shape.bitmap.height*e.scalar,v=new DOMMatrix([Math.cos(t)*c,Math.sin(t)*c,-Math.sin(t)*h,Math.cos(t)*h,e.x,e.y]);v.multiplySelf(new DOMMatrix(e.shape.matrix));var b=r.createPattern(N.transform(e.shape.bitmap),"no-repeat");b.setTransform(v),r.globalAlpha=1-a,r.fillStyle=b,r.fillRect(e.x-g/2,e.y-f/2,g,f),r.globalAlpha=1}else if("circle"===e.shape)r.ellipse?r.ellipse(e.x,e.y,Math.abs(s-o)*e.ovalScalar,Math.abs(l-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):function we(r,e,a,o,i,s,l,t,c){r.save(),r.translate(e,a),r.rotate(s),r.scale(o,i),r.arc(0,0,1,l,t,c),r.restore()}(r,e.x,e.y,Math.abs(s-o)*e.ovalScalar,Math.abs(l-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if("star"===e.shape)for(var d=Math.PI/2*3,w=4*e.scalar,I=8*e.scalar,x=e.x,k=e.y,T=5,E=Math.PI/T;T--;)x=e.x+Math.cos(d)*I,k=e.y+Math.sin(d)*I,r.lineTo(x,k),d+=E,x=e.x+Math.cos(d)*w,k=e.y+Math.sin(d)*w,r.lineTo(x,k),d+=E;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(i)),r.lineTo(Math.floor(s),Math.floor(l)),r.lineTo(Math.floor(o),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}(l,b)})).length?t=D.frame(v):f()}),c=f});return{addFettis:function(g){return s=s.concat(g),h},canvas:r,promise:h,reset:function(){t&&D.cancel(t),c&&c()}}}(r,L,c,w,I),f.promise)}function b(d){var w=s||p(d,"disableForReducedMotion",Boolean),I=p(d,"zIndex",Number);if(w&&g)return j(function(E){E()});a&&f?r=f.canvas:a&&!r&&(r=function ye(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}(I),document.body.appendChild(r)),o&&!h&&c(r);var x={width:r.width,height:r.height};function k(){if(t){var E={getBoundingClientRect:function(){if(!a)return r.getBoundingClientRect()}};return c(E),void t.postMessage({resize:{width:E.width,height:E.height}})}x.width=x.height=null}function T(){f=null,o&&(i=!1,u.removeEventListener("resize",k)),a&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,h=!1)}return t&&!h&&t.init(r),h=!0,t&&(r.__confetti_initialized=!0),o&&!i&&(i=!0,u.addEventListener("resize",k,!1)),t?t.fire(d,x,T):v(d,x,T)}return b.reset=function(){t&&t.reset(),f&&f.reset()},b}function Y(){return A||(A=Z(null,{useWorker:!0,resize:!0})),A}y.exports=function(){return Y().apply(this,arguments)},y.exports.reset=function(){Y().reset()},y.exports.create=Z,y.exports.shapeFromPath=function xe(r){if(!V)throw new Error("path confetti are not supported in this browser");var e,a;"string"==typeof r?e=r:(e=r.path,a=r.matrix);var o=new Path2D(e),s=document.createElement("canvas").getContext("2d");if(!a){for(var f,v,l=1e3,t=l,c=l,h=0,g=0,b=0;b<l;b+=2)for(var d=0;d<l;d+=2)s.isPointInPath(o,b,d,"nonzero")&&(t=Math.min(t,b),c=Math.min(c,d),h=Math.max(h,b),g=Math.max(g,d));f=h-t,v=g-c;var I=Math.min(10/f,10/v);a=[I,0,0,I,-Math.round(f/2+t)*I,-Math.round(v/2+c)*I]}return{type:"path",path:e,matrix:a}},y.exports.shapeFromText=function Ee(r){var e,a=1,o="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof r?e=r:(e=r.text,a="scalar"in r?r.scalar:a,i="fontFamily"in r?r.fontFamily:i,o="color"in r?r.color:o);var s=10*a,l=s+"px "+i,t=new OffscreenCanvas(s,s),c=t.getContext("2d");c.font=l;var h=c.measureText(e),g=Math.ceil(h.actualBoundingBoxRight+h.actualBoundingBoxLeft),f=Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent),b=h.actualBoundingBoxLeft+2,d=h.actualBoundingBoxAscent+2;g+=4,f+=4,(c=(t=new OffscreenCanvas(g,f)).getContext("2d")).font=l,c.fillStyle=o,c.fillText(e,b,d);var w=1/a;return{type:"bitmap",bitmap:t.transferToImageBitmap(),matrix:[w,0,0,w,-g*w/2,-f*w/2]}}}(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),B,!1);const q=B.exports;var _=B.exports.create,n=P(3664),ee=P(1562);function re(M,u){if(1&M&&(n.j41(0,"div",6),n.EFF(1),n.j41(2,"p"),n.EFF(3),n.k0s()()),2&M){const y=n.XpG();n.R7$(),n.SpI(" \u{1f33c} Winner: ",y.winner.username," \u{1f451} "),n.R7$(2),n.Lme("Rank: ",y.getRank(y.winner.id)," | Points: ",y.winner.points)}}function ne(M,u){if(1&M&&(n.j41(0,"ion-row")(1,"ion-col"),n.EFF(2),n.k0s(),n.j41(3,"ion-col"),n.EFF(4),n.k0s(),n.j41(5,"ion-col"),n.EFF(6),n.k0s()()),2&M){const y=u.$implicit,C=u.index,m=n.XpG();n.AVh("winner-row",0===C),n.R7$(2),n.JRh(y.username),n.R7$(2),n.JRh(y.points),n.R7$(2),n.JRh(m.getRank(y.id))}}function ae(M,u){1&M&&(n.j41(0,"ion-row")(1,"ion-col",7)(2,"em"),n.EFF(3,"No scores yet \u2014 waiting for game results"),n.k0s()()())}let te=(()=>{var M;class u{constructor(C){this.router=C,this.scores=[]}ngOnInit(){const m=this.router.getCurrentNavigation()?.extras.state;m?.scores&&(this.scores=m.scores,this.winner=this.scores[0]),this.winner&&O({particleCount:200,spread:70,origin:{y:.6},colors:["#fff8e7","#fbe4c4","#ffcc80","#d2691e","#ffd700"]})}getRank(C){return this.scores.findIndex(m=>m.id===C)+1}static#e=M=()=>(this.\u0275fac=function(m){return new(m||u)(n.rXU(ee.Ix))},this.\u0275cmp=n.VBU({type:u,selectors:[["app-winner"]],standalone:!1,decls:24,vars:3,consts:[["color","light"],[1,"page-background"],["class","winner-banner glass",4,"ngIf"],[1,"glass"],[3,"winner-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"winner-banner","glass"],["size","12",1,"ion-text-center"]],template:function(m,R){1&m&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n.EFF(3,"\u{1f3c6} Divine Scoreboard"),n.k0s()()(),n.j41(4,"ion-content",1),n.DNE(5,re,4,3,"div",2),n.j41(6,"ion-card",3)(7,"ion-card-header")(8,"ion-card-title"),n.EFF(9,"Final Scores"),n.k0s()(),n.j41(10,"ion-card-content")(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"strong"),n.EFF(15,"Player"),n.k0s()(),n.j41(16,"ion-col")(17,"strong"),n.EFF(18,"Score"),n.k0s()(),n.j41(19,"ion-col")(20,"strong"),n.EFF(21,"Rank"),n.k0s()()(),n.DNE(22,ne,7,5,"ion-row",4)(23,ae,4,0,"ion-row",5),n.k0s()()()()),2&m&&(n.R7$(5),n.Y8G("ngIf",R.winner),n.R7$(17),n.Y8G("ngForOf",R.scores),n.R7$(),n.Y8G("ngIf",0===R.scores.length))},dependencies:[S.Sq,S.bT,F.b_,F.I9,F.ME,F.tN,F.hU,F.W9,F.lO,F.eU,F.ln,F.BC,F.ai],styles:[".page-background[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #fff8e7, #fbe4c4)}.glass[_ngcontent-%COMP%]{background:#fff9;border-radius:16px;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(210,140,70,.3);padding:20px;margin:20px;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}.winner-banner[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px;text-align:center;color:sienna}.winner-row[_ngcontent-%COMP%]{background:#ffc8784d;border:2px solid goldenrod;border-radius:12px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]}))}return M(),u})();var $=P(2615);const oe=[{path:"",component:te}];let ie=(()=>{var M;class u{static#e=M=()=>(this.\u0275fac=function(m){return new(m||u)},this.\u0275mod=n.$C({type:u}),this.\u0275inj=$.G2t({imports:[z.iI.forChild(oe),z.iI]}))}return M(),u})(),se=(()=>{var M;class u{static#e=M=()=>(this.\u0275fac=function(m){return new(m||u)},this.\u0275mod=n.$C({type:u}),this.\u0275inj=$.G2t({imports:[S.MD,Q.YN,F.bv,ie]}))}return M(),u})()}}]);